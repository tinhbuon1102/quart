var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,h,c){a instanceof String&&(a=String(a));for(var d=a.length,g=0;g<d;g++){var p=a[g];if(h.call(c,p,g,a))return{i:g,v:p}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,c){a!=Array.prototype&&a!=Object.prototype&&(a[h]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,h,c,d){if(h){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];h=h(d);h!=d&&null!=h&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
jQuery(function(a){var h=a("#yith-wcbep-categories-filter"),c=a("#yith-wcbep-table-wrap .wp-list-table"),d=a("#yith-wcbep-custom-input"),g=null,p=null,q=[],z=[],r=[],l=[],A=a("#yith-wcbep-get-products"),B=a("#yith-wcbep-filter-form"),C=a("#yith-wcbep-categories-filter"),D=a("#yith-wcbep-regular-price-filter-select"),E=a("#yith-wcbep-regular-price-filter-value"),F=a("#yith-wcbep-sale-price-filter-select"),G=a("#yith-wcbep-sale-price-filter-value"),H=a("#yith-wcbep-per-page-filter"),N=a("#yith-wcbep-reset-filters");
a("#yith-wcbep-table-wrap");var u=a("#yith-wcbep-bulk-edit-btn"),n=a("#yith-wcbep-bulk-editor"),I=a("#yith-wcbep-bulk-apply");a("#yith-wcbep-regular-price-bulk-select");a("#yith-wcbep-regular-price-bulk-value");a("#yith-wcbep-sale-price-bulk-select");a("#yith-wcbep-sale-price-bulk-value");var v=a("#yith-wcbep-save"),w=[],t=[];a("#yith-wcbep-message");var J={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0},O={message:null,overlayCSS:{background:"#000 url()",opacity:.6,cursor:"default"}},
x=function(a){a&&d.hide();g&&(g.html(d.html()),d.html(""),g=null);K()},y=[],K=function(b){var f=0;y=[];t=[];c.find("tbody#the-list > tr").each(function(){var b=a(this).children("td"),c=!1;if(0<b.length){var d=1,e=[];e.push(0);b.each(function(){a(this).html()!=q[f][d]?(a(this).addClass("yith-wcbep-table-modified-td"),c=!0,e.push(1)):(a(this).removeClass("yith-wcbep-table-modified-td"),e.push(0));d++});y.push(e);c&&t.push(f);f++}});b&&create_current_html_matrix()},P=function(){c=a("#yith-wcbep-table-wrap .wp-list-table");
L();c.find("th#cb input").on("click",function(){var b=c.find("tbody#the-list th.check-column > input");a(this).is(":checked")?b.attr("checked",!0):b.attr("checked",!1)});c.on("click","td.regular_price, td.sale_price",function(b){b.stopPropagation();x(!1);g=a(b.target);p=a(b.target);d.width(g.width());d.height(g.height());d.show();d.offset(g.offset());d.html(g.html())})},L=function(){q=[];l=[];c.find("tbody tr").each(function(){var b=a(this).find("td"),f=[a(this).find("th")];if(0<b.length){var c=[!1];
b.each(function(){c.push(a(this).html());f.push(a(this))});q.push(c);l.push(f)}})},Q=function(){var b=[];c.find("tbody tr").each(function(){var f=a(this).find("td");if(0<f.length){var c=[!1];f.each(function(){c.push(a(this).html())});b.push(c)}});return b},R=function(){var b=0,f=[];c.find("tbody tr").each(function(){0<a(this).find("th input:checked").length&&f.push(b);b++});return f},M=function(){n.find("input.is_resetable").each(function(){a(this).val("")});n.find("select.is_resetable").each(function(){a(this).prop("selectedIndex",
0)})},S=function(){B.find("input.is_resetable").each(function(){a(this).val("")});B.find("select.is_resetable").each(function(){a(this).prop("selectedIndex",0)});h.val("").trigger("change")},T=function(){if(p)for(index in l){var b=l[index];for(index_col in b)if(a(b[index_col])[0]==p[0]&&"undefined"!=typeof l[parseInt(index)+1]){a(l[parseInt(index)+1][index_col]).trigger("click");d.selectText();return}}};a.fn.selectText=function(){var a=this[0];if(document.body.createTextRange){var f=document.body.createTextRange();
f.moveToElementText(a);f.select()}else if(window.getSelection){var c=window.getSelection();f=document.createRange();f.selectNodeContents(a);c.removeAllRanges();c.addRange(f)}};h.select2({width:"95%"});d.offset([0,0]);r=function(){var b=[];c.find("thead tr th").each(function(){b.push(a(this).attr("id"))});return b}();n.draggable();a("html").on("click",function(){x(!0)});d.on("click",function(a){a.stopPropagation()}).keypress(function(a){13==a.which&&(x(!0),a.stopPropagation(),setTimeout(T,0))});A.on("click",
function(){var a={f_categories:C.val(),f_reg_price_select:D.val(),f_reg_price_value:E.val(),f_sale_price_select:F.val(),f_sale_price_value:G.val(),f_per_page:H.val()};list.update(a)});u.on("click",function(){var b=[];c.find("tbody th input:checked").each(function(){b.push(a(this).val())});1>b.length?alert(ajax_object.no_product_selected):(n.fadeIn(),a("#wpwrap").block(O),w=R())});a("#yith-wcbep-bulk-cancel").add(".yith-wcbep-close-bulk-editor").on("click",function(){n.fadeOut();M();a("#wpwrap").unblock()});
n.keypress(function(a){13==a.which&&I.trigger("click")});I.on("click",function(){for(var b in w){var f=w[b],c=["regular_price","sale_price"],d;for(d in c)if(-1<r.indexOf(c[d])){var g=a(l[f][r.indexOf(c[d])]),e=parseFloat(g.html()),k="",h=a("#yith-wcbep-"+c[d]+"-bulk-select").val(),m=a("#yith-wcbep-"+c[d]+"-bulk-value").val();if((!isNaN(m)&&""!=m||"del"==h)&&1>g.find(".not_editable").length){switch(h){case "new":k=parseFloat(m);break;case "inc":e=isNaN(e)?0:e;k=e+parseFloat(m);break;case "dec":k=0<
e?e-parseFloat(m):"";break;case "incp":k=0<e?e+e*parseFloat(m)/100:"";break;case "decp":k=0<e?e-e*parseFloat(m)/100:"";break;case "decfr":e=a(l[f][r.indexOf("regular_price")]);e=parseFloat(e.html());isNaN(e)||""==e||(k=e-parseFloat(m));break;case "decpfr":e=a(l[f][r.indexOf("regular_price")]);e=parseFloat(e.html());isNaN(e)||""==e||(k=e-e*parseFloat(m)/100);break;case "del":k=""}""!=k&&(0>k||isNaN(k))&&(k=0);g.html(k)}}}n.fadeOut();M();a("#wpwrap").unblock()});N.on("click",function(){S()});v.on("click",
function(){K();if(0<t.length){c.block(J);v.prop("disabled",!0);u.prop("disabled",!0);z=Q();var b=[],f=[];for(h in t){var d=t[h];b.push(z[d]);f.push(y[d])}for(var g in f){var h=f[g];for(ic in h)0==h[ic]&&2!=ic&&(b[g][ic]=null)}var e=b.length,k=e,l=0,m=a("#yith-wcbep-percentual-container");m.html('<span class="yith-wcbep-percentual" style="width:'+l+'%;">'+l+"%</span>");var n=m.find("span.yith-wcbep-percentual");m.fadeIn();var p=b.length,q=function(c){c<p?a.ajax({type:"POST",data:{matrix_keys:r,matrix_modify:[b[c]],
edited_matrix:[f[c]],action:"yith_wcbep_bulk_edit_products"},url:ajaxurl,success:function(a){},complete:function(a){e--;l=parseInt(100*(k-e)/k);n.html(l+"%");n.animate({width:l+"%"},200);q(++c)}}):(A.trigger("click"),m.delay(1500).fadeOut())};0<p&&q(0)}});list={init:function(){var c;P();a(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(a){a.preventDefault();a=this.search.substring(1);a={paged:list.__query(a,"paged")||"1",order:list.__query(a,"order")||
"asc",orderby:list.__query(a,"orderby")||"date",f_categories:C.val(),f_reg_price_select:D.val(),f_reg_price_value:E.val(),f_sale_price_select:F.val(),f_sale_price_value:G.val(),f_per_page:H.val()};list.update(a)});a("input[name=paged]").on("keyup",function(b){13==b.which&&b.preventDefault();var f={paged:parseInt(a("input[name=paged]").val())||"1",order:a("input[name=order]").val()||"asc",orderby:a("input[name=orderby]").val()||"date"};window.clearTimeout(c);c=window.setTimeout(function(){list.update(f)},
500)})},update:function(b){c.block(J);v.prop("disabled",!0);u.prop("disabled",!0);a.ajax({url:ajaxurl,data:a.extend({_ajax_yith_wcbep_list_nonce:a("#_ajax_yith_wcbep_list_nonce").val(),action:"_ajax_fetch_yith_wcbep_list"},b),success:function(b){b=a.parseJSON(b);b.rows.length&&a("#the-list").html(b.rows);b.column_headers.length&&a("thead tr, tfoot tr").html(b.column_headers);b.pagination.bottom.length&&a(".tablenav.top .tablenav-pages").html(a(b.pagination.top).html());b.pagination.top.length&&a(".tablenav.bottom .tablenav-pages").html(a(b.pagination.bottom).html());
list.init();c.unblock();v.prop("disabled",!1);u.prop("disabled",!1);L()}})},__query:function(a,c){a=a.split("&");for(var b=0;b<a.length;b++){var d=a[b].split("=");if(d[0]==c)return d[1]}return!1}};list.init()});
