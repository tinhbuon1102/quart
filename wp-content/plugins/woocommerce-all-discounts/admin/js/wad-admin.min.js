function is_json(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?!0:!1}!function(e){"use strict";e(document).ready(function(){e(".TabbedPanels").each(function(){var t=0;new Spry.Widget.TabbedPanels(e(this).attr("id"),{defaultTab:t})}),e(document).on("click",".wad-add-rule",function(t){var r=e(".wad-rules-table tr").length,a=e(this).data("group"),n=e("#wad-rule-tpl").val(),o=n.replace(/{rule-group}/g,a),i=o.replace(/{rule-index}/g,r);e(this).parents(".wad-rules-table").find("tbody").append(i)}),e(document).on("click",".wad-add-group",function(t){var r=0,a=e(".wad-rules-table").length,n=e("#wad-first-rule-tpl").val(),o=n.replace(/{rule-group}/g,a),i=o.replace(/{rule-index}/g,r),d='<table class="wad-rules-table widefat"><tbody>'+i+"</tbody></table>";e(".wad-rules-table-container").append(d)}),e(document).on("click",".wad-remove-rule",function(t){1==e(this).parent().parent().parent().find("tr").length?e(this).parent().parent().parent().parent().remove():e(this).parent().parent().remove()}),e(document).on("change",".wad-pricing-group-param",function(t){var r=e(this).val(),a=wad_values_matches[r],n=e(this).data("group"),o=e(this).data("rule"),i=a.replace(/{rule-group}/g,n),d=i.replace(/{rule-index}/g,o);e(this).parent().parent().find("td.value").html(d);var l=wad_operators_matches[r];i=l.replace(/{rule-group}/g,n),d=i.replace(/{rule-index}/g,o),e(this).parent().parent().find("td.operator").html(d)}),e(".add-rf-row").click(function(){var t=e(this).siblings("table").find("tbody"),r=e(this).siblings(".rf-row-template").val(),a=t.find("tr").length,n=r.replace(/{index}/g,a);t.append(n)}),e(document).on("click",".remove-rf-row",function(t){e(this).parent().parent().remove()}),e("#wad-check-query").click(function(){var t=e("#post").serializeJSON();e("#wad-evaluate-loading").css("display","inline-block"),e("#debug").html(""),e.post(ajaxurl,{action:"evaluate-wad-query",data:t},function(t){if(e("#wad-evaluate-loading").hide(),is_json(t)){var r=JSON.parse(t);e("#debug").html(r.msg)}else e("#debug").html(t)})}),e("#products-list").is(":visible")&&e("#products-list").prop("required",!0),e(document).on("change",".discount-action",function(t){var r=e(this).val();4==r?(e(".free-gift-row").show(),e(".percentage-row, .product-action-row").hide(),e("#products-list").prop("required",!1)):0==r||1==r?(e(".free-gift-row").hide(),e(".percentage-row, .product-action-row").show(),e("#products-list").prop("required",!0)):(e(".free-gift-row, .product-action-row").hide(),e(".percentage-row").show(),e("#products-list").prop("required",!1))}),e(document).on("change",".o-list-extraction-type",function(t){var r=e(this).val();"by-id"==r?(e(".extract-by-id-row").show(),e(".extract-by-custom-request-row").hide()):(e(".extract-by-id-row").hide(),e(".extract-by-custom-request-row").show())}),e(document).on("change",".wad-taxonomies-selector",function(t){var r=e(this).val();e(this).parent().parent().find(".wad-terms-selector").html(wad_tax_query_recap[r])})})}(jQuery);