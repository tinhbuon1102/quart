jQuery(document).ready(function(e){"use strict";var t=e(document).find(".ywdpd-sections-group").find(".ywdpd-section"),n=t.find(".yith-ywdpd-eventype-select"),i="undefined"!=typeof yith_ywdpd_admin&&yith_ywdpd_admin.del_msg,d=yith_ywdpd_admin.ajaxurl+"?action=ywdpd_admin_action",a=function(t){t.each(function(){var t=e(this),n=t.data("field"),i=t.find("option:selected");o(t,i.val(),n),t.on("change",function(){var e=t.data("field"),n=t.find("option:selected");o(t,n.val(),e)})})},o=function(t,n,i){t.closest(".ywdpd-select-wrapper").find("tr.deps-"+i).each(function(){var t=e(this).data("type").split(";");if(-1!==e.inArray(n,t))e(this).show();else if(e(this).hide(),void 0!==e(this).data("rel")){var i="deps-"+e(this).data("rel");e(this).parents(".ywdpd-section").find("."+i).hide()}})};if(e(document).on("click",".add-row",function(){var t=e(this),n=t.closest("table"),i=t.closest("tr"),d=parseInt(i.data("index")),o=i.clone(),r=n.find("tr"),c=1;o.find("select").removeClass("enhanced"),o.find("span.select2").remove(),r.each(function(){var t=e(this).data("index");t>c&&(c=t)});var s=c+1;o.attr("data-index",s),o.find("[name*='rules']").each(function(){var t=e(this),n=t.attr("name"),i=t.attr("id"),a=n.replace("[rules]["+d+"]","[rules]["+s+"]"),o=i.replace("[rules]["+d+"]","[rules]["+s+"]");t.attr("name",a),t.attr("id",o),t.val("")}),o.find(".remove-row").removeClass("hide-remove"),n.append(o),e(document.body).trigger("wc-enhanced-select-init");var l=o.find(".yith-ywdpd-eventype-select");a(l)}),e(document).on("click",".remove-row",function(){e(this).closest("tr").remove()}),e("table.widefat.wp-list-table.discounts tr").append('<td class="column-handle"></td>'),jQuery(".ywdpd-sections-group").sortable({items:".ywdpd-section-handle",cursor:"move",axis:"y",handle:"form",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(t,n){n.item.removeAttr("style");var i=e(".ywdpd-section-handle"),a=0,o=new Array;for(a=0;a<i.length;a++)o[a]=e(i[a]).data("key");o.length>0&&e.post(d,{ywdpd_action:"order_section",tab:e(".form-table").closest(".yit-admin-panel-content-wrap-full").data("type"),order_keys:o},function(e){})}}),a(n),t.find(".datepicker").each(function(){e(this).prop("placeholder","YYYY-MM-DD HH:mm")}).datetimepicker({timeFormat:"HH:mm",defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1}),e("#_discount_type").length){var r=e("#_discount_type").data("std"),c=e(".page-title-action").attr("href");e("#_discount_type").attr("value",r),e(".page-title-action").attr("href",c+"&ywdpd_discount_type="+r)}e("#_schedule_from, #_schedule_to").each(function(){e(this).prop("placeholder","YYYY-MM-DD HH:mm")}).datetimepicker({timeFormat:"HH:mm",defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1});var s=e("#ywdpd_cart_discount").find(".yith-ywdpd-eventype-select");a(s),e(".wp-list-table.discounts").sortable({items:"tbody tr:not(.inline-edit-row)",cursor:"move",handle:".column-handle",axis:"y",forcePlaceholderSize:!0,helper:"clone",opacity:.65,start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(t,n){n.item.removeAttr("style");var i=n.item.find(".check-column input").val(),a=n.item.prev().find(".check-column input").val(),o=n.item.next().find(".check-column input").val();e.post(d,{ywdpd_action:"table_order_section",type:e("#ywdpd-discount-list-table").data("type"),roleid:i,previd:a,nextid:o},function(e){})}}),e("#ywdpd-discount-list-table").on("submit",function(){if("delete"==e(this).find("#bulk-action-selector-top").val())return 1==window.confirm(i)}),e(".cart_discount,.cart_discount_type").show()});