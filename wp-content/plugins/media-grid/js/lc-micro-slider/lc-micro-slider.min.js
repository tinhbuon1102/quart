/**
 * lc_micro_slider.js - lightweight responsive slider with jquery.touchSwipe.js integration
 * Version: 1.1
 * Author: Luca Montanari aka LCweb
 * Website: http://www.lcweb.it
 * Licensed under the MIT license
 */

(function(d){var m=function(k,b){var c=d.extend({slide_fx:"fadeslide",nav_arrows:!0,carousel:!0,touchswipe:!0,autoplay:!1,animation_time:700,slideshow_time:5E3,pause_on_hover:!0,loader_code:'<span class="lcms_loader"></span>'},b),h=d(k);h.data("lcms_vars",{slides:[],shown_slide:0,cached_img:[],is_sliding:!1,is_playing:!1,paused_on_hover:!1});h.data("lcms_settings",c);var n=function(a,l,e){var f=a.data("lcms_vars"),b=a.data("lcms_settings"),g=f.slides[e],c=g.img?"lcms_preload":"",b=g.img?b.loader_code:
"";switch(l){case "init":var h="lcms_active_slide";break;case "fade":h="lcms_fadein";break;case "prev":h="lcms_before";break;case "next":h="lcms_after"}l=g.img?'<div class="lcms_bg" style="background-image: url('+g.img+');"></div>':"";var p=d.trim(g.content)?'<div class="lcms_content">'+g.content+"</div>":"",c='<div class="lcms_slide '+h+" "+c+'" rel="'+e+'"><div class="lcms_inner">'+l+p+"</div>"+b+"</div>";a.find(".lcms_wrap").append(c);g.img&&(-1===d.inArray(g.img,f.cached_img)?d("<img/>").bind("load",
function(){f.cached_img.push(this.src);d(".lcms_slide[rel="+e+"]").removeClass("lcms_preload");d(".lcms_slide[rel="+e+"]").find("> *").not(".lcms_inner").fadeOut(300,function(){d(this).remove()});a.trigger("lcms_slide_shown",[e,g]);d(".lcms_slide[rel="+e+"]").hasClass("lcms_active_slide")&&a.trigger("lcms_initial_slide_shown",[e,g])}).attr("src",g.img):(d(".lcms_slide[rel="+e+"]").removeClass("lcms_preload").addClass("lcms_cached"),d(".lcms_slide[rel="+e+"]").find("> *").not(".lcms_inner").remove(),
a.trigger("lcms_slide_shown",[e,g])));1<f.slides.length&&(c=e<f.slides.length-1?e+1:0,-1===d.inArray(f.slides[c].img,f.cached_img)&&d("<img/>").bind("load",function(){f.cached_img.push(this.src)}).attr("src",f.slides[c].img));2<f.slides.length&&(c=0==e?f.slides.length-1:e-1,-1===d.inArray(f.slides[c].img,f.cached_img)&&d("<img/>").bind("load",function(){f.cached_img.push(this.src)}).attr("src",f.slides[c].img))};lcms_slide=function(a,b){var e=a.data("lcms_vars"),f=a.data("lcms_settings"),c=f.animation_time;
if(!f.carousel&&("prev"==b&&0==e.shown_slide||"next"==b&&e.shown_slide==e.slides.length-1)||e.lcms_is_sliding||1==e.slides.length)return!1;e.lcms_is_sliding=!0;var g="prev"==b?0===e.shown_slide?e.slides.length-1:e.shown_slide-1:e.shown_slide==e.slides.length-1?0:e.shown_slide+1;a.find(".lcms_active_slide").addClass("lcms_prepare_for_"+b);n(a,"fade"==f.slide_fx?"fade":b,g);e.shown_slide=g;a.trigger("lcms_changing_slide",[g,e.slides[g],b]);"fade"==f.slide_fx?a.find(".lcms_active_slide").fadeOut(c):
"slide"==f.slide_fx?"prev"==b?(a.find(".lcms_before").css("left","-100%").animate({left:"0%"},c),a.find(".lcms_active_slide").animate({left:"100%"},c)):(a.find(".lcms_after").css("left","100%").animate({left:"0%"},c),a.find(".lcms_active_slide").animate({left:"-100%"},c)):"fadeslide"==f.slide_fx?"prev"==b?(a.find(".lcms_before").fadeTo(0,0).animate({left:"0%",opacity:1},c),a.find(".lcms_active_slide").animate({left:"100%",opacity:0},c)):(a.find(".lcms_after").fadeTo(0,0).animate({left:"0%",opacity:1},
c),a.find(".lcms_active_slide").animate({left:"-100%",opacity:0},c)):"zoom-in"==f.slide_fx?a.find(".lcms_before, .lcms_after").fadeTo(0,0).animate({opacity:1},{step:function(a,c){var b=.5+a/2;d(this).css("-ms-transform","scale("+b+")").css("-webkit-transform","scale("+b+")").css("transform","scale("+b+")")},duration:c}):"zoom-out"==f.slide_fx&&a.find(".lcms_before, .lcms_after").fadeTo(0,0).animate({opacity:1},{step:function(a,c){var b=1.5-a/2;d(this).css("-ms-transform","scale("+b+")").css("-webkit-transform",
"scale("+b+")").css("transform","scale("+b+")")},duration:c});setTimeout(function(){a.find(".lcms_active_slide").remove();a.find(".lcms_slide").removeClass("lcms_fadein lcms_before lcms_after").addClass("lcms_active_slide");e.lcms_is_sliding=!1;a.trigger("lcms_new_active_slide",[g,e.slides[g]])},c)};d(".lcms_prev").unbind("click");h.delegate(".lcms_prev:not(.lcms_disabled)","click",function(){var a=d(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);
lcms_one_click=setTimeout(function(){a.lcms_stop_slideshow();lcms_slide(a,"prev")},5)});d(".lcms_next").unbind("click");h.delegate(".lcms_next:not(.lcms_disabled)","click",function(){var a=d(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){a.lcms_stop_slideshow();lcms_slide(a,"next")},5)});var m=function(){d(".lcms_wrap").swipe({swipeRight:function(){var a=jQuery(this).parent();a.lcms_stop_slideshow();lcms_slide(a,
"prev")},swipeLeft:function(){var a=jQuery(this).parent();a.lcms_stop_slideshow();lcms_slide(a,"next")},threshold:40,allowPageScroll:"vertical"})};c.pause_on_hover&&h.delegate(".lcms_wrap","mouseenter",function(){var a=d(this).parent(),b=a.data("lcms_vars");a.data("lcms_settings");b.is_playing&&(a.lcms_stop_slideshow(),b.paused_on_hover=!0)}).delegate(".lcms_wrap","mouseleave",function(){var a=d(this).parent(),b=a.data("lcms_vars");a.data("lcms_settings");b.paused_on_hover&&(a.lcms_start_slideshow(),
b.paused_on_hover=!1)});(function(a){var b=a.data("lcms_vars"),c=a.data("lcms_settings");a.find("li").each(function(a,c){d(this).find("noscript").remove();var e={content:d(this).html(),img:d(this).attr("lcms_img")};b.slides.push(e)});a.html('<div class="lcms_wrap"></div>');b.shown_slide=0;n(a,"init",0);c.nav_arrows&&1<b.slides.length&&a.find(".lcms_wrap").append('<div class="lcms_nav"><span class="lcms_prev"></span><span class="lcms_next"></span></div>');c.autoplay&&a.lcms_start_slideshow();a.trigger("lcms_ready");
d(document).ready(function(a){"function"==typeof d.fn.swipe&&m()})})(h);return this};d.fn.lc_micro_slider=function(k){d.fn.lcms_destroy=function(){var b=d(this);b.find(".lcms_wrap").remove();var c=b.data("lcms_vars");c.is_playing&&clearInterval(c.is_playing);b.find(".lcms_next, .lcms_prev").undelegate("click");b.removeData("lcms_vars");b.removeData("lcms_settings");b.removeData("lc_micro_slider");return!0};d.fn.lcms_paginate=function(b){var c=d(this);c.data("lcms_vars");c.data("lcms_settings");c.lcms_stop_slideshow();
lcms_slide(c,b);return!0};d.fn.lcms_start_slideshow=function(){var b=d(this),c=b.data("lcms_vars"),h=b.data("lcms_settings");c.is_playing=setInterval(function(){lcms_slide(b,"next")},h.slideshow_time+h.animation_time);b.trigger("lcms_play_slideshow");return!0};d.fn.lcms_stop_slideshow=function(){var b=d(this),c=b.data("lcms_vars");b.data("lcms_settings");clearInterval(c.is_playing);c.is_playing=null;b.trigger("lcms_stop_slideshow");return!0};return this.each(function(){if(d(this).data("lc_micro_slider"))return d(this).data("lc_micro_slider");
var b=new m(this,k);d(this).data("lc_micro_slider",b)})}})(jQuery);